{"version":3,"sources":["../../app/scripts/donate.js"],"names":[],"mappings":"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","file":"donate.js","sourcesContent":["'use strict';\n\n(function donate() {\n\n  var stripe = Stripe('pk_test_6pRNASCoBOKtIshFeQd4XMUh');\n\n  function registerElements(elements, formDonateName) {\n    var formClass = '.' + 'donate';\n    var formDonate = document.querySelector(formClass);\n\n    var form = formDonate.querySelector('form');\n    var resetButton = formDonate.querySelector('a.reset');\n    var error = form.querySelector('.error');\n    var errorMessage = error.querySelector('.message');\n\n    function enableInputs() {\n      Array.prototype.forEach.call(\n        form.querySelectorAll(\n          \"input[type='text'], input[type='email'], input[type='tel']\"\n        ),\n        function(input) {\n          input.removeAttribute('disabled');\n        }\n      );\n    }\n\n    function disableInputs() {\n      Array.prototype.forEach.call(\n        form.querySelectorAll(\n          \"input[type='text'], input[type='email'], input[type='tel']\"\n        ),\n        function(input) {\n          input.setAttribute('disabled', 'true');\n        }\n      );\n    }\n\n    // Listen for errors from each Element, and show error messages in the UI.\n    elements.forEach(function(element) {\n      element.on('change', function(event) {\n        if (event.error) {\n          error.classList.add('visible');\n          errorMessage.innerText = event.error.message;\n        } else {\n          error.classList.remove('visible');\n        }\n      });\n    });\n\n    // Listen on the form's 'submit' handler...\n    form.addEventListener('submit', function(e) {\n      e.preventDefault();\n\n      // Show a loading screen...\n      formDonate.classList.add('submitting');\n\n      // Disable all inputs.\n      disableInputs();\n\n      // Gather additional customer data we may have collected in our form.\n      var name = form.querySelector('#' + formDonateName + '-name');\n      var address1 = form.querySelector('#' + formDonateName + '-address');\n      var city = form.querySelector('#' + formDonateName + '-city');\n      var state = form.querySelector('#' + formDonateName + '-state');\n      var zip = form.querySelector('#' + formDonateName + '-zip');\n      var additionalData = {\n        name: name ? name.value : undefined,\n        address_line1: address1 ? address1.value : undefined,\n        address_city: city ? city.value : undefined,\n        address_state: state ? state.value : undefined,\n        address_zip: zip ? zip.value : undefined,\n      };\n\n      // Use Stripe.js to create a token. We only need to pass in one Element\n      // from the Element group in order to create a token. We can also pass\n      // in the additional customer data we collected in our form.\n      stripe.createToken(elements[0], additionalData).then(function(result) {\n        // Stop loading!\n        formDonate.classList.remove('submitting');\n\n        if (result.token) {\n          // If we received a token, show the token ID.\n          formDonate.querySelector('.token').innerText = result.token.id;\n          formDonate.classList.add('submitted');\n        } else {\n          // Otherwise, un-disable inputs.\n          enableInputs();\n        }\n      });\n    });\n\n    resetButton.addEventListener('click', function(e) {\n      e.preventDefault();\n      // Resetting the form (instead of setting the value to `''` for each input)\n      // helps us clear webkit autofill styles.\n      form.reset();\n\n      // Clear each Element.\n      elements.forEach(function(element) {\n        element.clear();\n      });\n\n      // Reset error state as well.\n      error.classList.remove('visible');\n\n      // Resetting the form does not un-disable inputs, so we need to do it separately:\n      enableInputs();\n      formDonate.classList.remove('submitted');\n    });\n  }\n\n})();\n"]}